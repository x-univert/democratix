@import 'tailwindcss';

@theme {
  --breakpoint-xs: 30rem; /* 480px */
  --background-image-dark-theme: url('/dark-theme-bg.png');
  --background-image-vibe-theme: url('/vibe-theme-bg.png');
  --background-image-light-theme: url('/light-theme-bg.png');
  --background-color-primary: var(--mvx-bg-color-primary);
  --background-color-secondary: var(--mvx-bg-color-secondary);
  --background-color-tertiary: var(--mvx-hover-bg-primary);
  --background-color-accent: var(--mvx-bg-accent-color);
  --background-color-btn-primary: var(--mvx-button-bg-primary);
  --background-color-btn-secondary: var(--mvx-button-bg-secondary);
  --background-color-btn-tertiary: var(--mvx-button-bg-secondary);
  --background-color-btn-variant: var(--mvx-button-bg-variant);
  --background-color-btn-hover: var(--mvx-hover-color-primary);
  --background-color-logo-primary: var(--mvx-text-color-primary);
  --background-color-icon: var(--mvx-link-color);
  --color-primary: var(--mvx-text-color-primary);
  --color-secondary: var(--mvx-text-color-secondary);
  --color-tertiary: var(--mvx-text-color-tertiary);
  --color-accent: var(--mvx-text-accent-color);
  --color-btn-primary: var(--mvx-button-text-primary);
  --color-btn-secondary: var(--mvx-button-text-secondary);
  --color-link: var(--mvx-link-color);
  --color-success: var(--mvx-success-color);
  --color-error: var(--mvx-error-color);
  --color-warning: var(--mvx-warning-color);
  --background-color-success: var(--mvx-success-color);
  --background-color-error: var(--mvx-error-color);
  --background-color-warning: var(--mvx-warning-color);
  --border-color-secondary: var(--mvx-border-color-secondary);
  --border-color-logo: var(--mvx-text-color-primary);
}

:root {
  --mvx-slate-75: #f8f8ff;
  --mvx-fuchsia-550: #f04dff;
  --mvx-purple-150: #e8dde6; /* Lightened for WCAG AA contrast (was #ddcedb) */
  --mvx-purple-350: #b5a0b9;
  --mvx-purple-850: #431c4e;
  --mvx-purple-875: #471150;
  --mvx-purple-925: #3c1543;
  --mvx-purple-975: #310339;

  /* Couleurs de status */
  --mvx-success-color: #10b981;
  --mvx-error-color: #ef4444;
  --mvx-warning-color: #f59e0b;
}

/* Override text-secondary for ALL themes to ensure WCAG AA contrast */
:root[data-mvx-theme='mvx:dark-theme'],
[data-mvx-theme='mvx:dark-theme'] {
  --mvx-text-color-secondary: #d1d5db; /* gray-300 - 8.3:1 contrast on dark bg */
}

:root[data-mvx-theme='mvx:light-theme'],
[data-mvx-theme='mvx:light-theme'] {
  --mvx-text-color-secondary: #4b5563; /* gray-600 - 5.7:1 contrast on white bg */
}

:root[data-mvx-theme='mvx:vibe-theme'],
[data-mvx-theme='mvx:vibe-theme'] {
  --mvx-bg-color-primary: var(--mvx-purple-925);
  --mvx-bg-color-secondary: var(--mvx-purple-875);
  --mvx-bg-accent-color: var(--mvx-purple-975);
  --mvx-bg-accent-variant-color: var(--mvx-purple-925);
  --mvx-hover-color-primary: var(--mvx-purple-850);
  --mvx-text-color-primary: var(--mvx-white);
  --mvx-text-color-secondary: var(--mvx-purple-150); /* Changed from purple-350 to purple-150 for better contrast (WCAG AA) */
  --mvx-text-color-tertiary: var(--mvx-slate-75);
  --mvx-text-accent-color: var(--mvx-fuchsia-550);
  --mvx-link-color: var(--mvx-purple-150);
  --mvx-label-color: var(--mvx-purple-150);
  --mvx-icon-bg: var(--mvx-purple-925);
  --mvx-button-bg-primary: var(--mvx-fuchsia-550);
  --mvx-button-bg-secondary: var(--mvx-purple-875);
  --mvx-button-bg-variant: var(--mvx-purple-875);
  --mvx-button-text-primary: var(--mvx-black);
  --mvx-button-text-secondary: var(--mvx-neutral-225);
  --mvx-border-color-secondary: var(--mvx-purple-850);
  --mvx-scrollbar-thumb: var(--mvx-purple-925);
}

/* Classes personnalisées DEMOCRATIX */

/* Badge "Terminée" - noir pour dark themes, blanc pour light theme */
.finished-badge {
  color: #000000;
}

[data-mvx-theme='mvx:light-theme'] .finished-badge {
  color: #ffffff;
}

/* Badge "Fermée" - adapté à chaque thème */
.closed-badge {
  color: #000000; /* Noir par défaut (dark-theme et vibe-theme) */
}

[data-mvx-theme='mvx:light-theme'] .closed-badge {
  color: #ffffff; /* Blanc pour light theme */
}

/* Bordures claires pour VibeMode uniquement */
[data-mvx-theme='mvx:vibe-theme'] .vibe-border {
  border-color: var(--mvx-purple-150) !important;
}

/* Barre de progression - fond pour BrightLight */
[data-mvx-theme='mvx:light-theme'] .progress-bar-bg {
  background-color: #e5e7eb !important;
}

/* Boutons spécifiques TealLab */
/* Bouton "Créer une élection" - texte turquoise au hover */
[data-mvx-theme='mvx:dark-theme'] .btn-create-election:hover {
  color: var(--mvx-button-bg-primary) !important;
}

/* Bouton "Détails" - texte noir au hover */
[data-mvx-theme='mvx:dark-theme'] .btn-details:hover {
  color: #000000 !important;
}

/* Bouton "Voter" - texte turquoise au hover */
[data-mvx-theme='mvx:dark-theme'] .btn-vote:hover {
  color: var(--mvx-button-bg-primary) !important;
}

/* Bouton "Voir les résultats" - texte gris foncé au hover */
[data-mvx-theme='mvx:dark-theme'] .btn-results:hover {
  color: #4b5563 !important;
}

/* Boutons spécifiques VibeMode */
/* Bouton "Créer une élection" - texte fuchsia au hover */
[data-mvx-theme='mvx:vibe-theme'] .btn-create-election:hover {
  color: var(--mvx-fuchsia-550) !important;
}

/* Bouton "Détails" - texte noir au hover */
[data-mvx-theme='mvx:vibe-theme'] .btn-details:hover {
  color: #000000 !important;
}

/* Bouton "Voter" - texte fuchsia au hover */
[data-mvx-theme='mvx:vibe-theme'] .btn-vote:hover {
  color: var(--mvx-fuchsia-550) !important;
}

/* Bouton "Voir les résultats" - texte purple clair au hover */
[data-mvx-theme='mvx:vibe-theme'] .btn-results:hover {
  color: var(--mvx-purple-350) !important;
}

/* Bouton "Confirmer mon vote" pour tous les themes */
/* TealLab - texte turquoise au hover */
[data-mvx-theme='mvx:dark-theme'] .btn-confirm-vote:hover {
  color: var(--mvx-button-bg-primary) !important;
}

/* VibeMode - texte fuchsia au hover */
[data-mvx-theme='mvx:vibe-theme'] .btn-confirm-vote:hover {
  color: var(--mvx-fuchsia-550) !important;
}

/* BrightLight - texte bleu au hover */
[data-mvx-theme='mvx:light-theme'] .btn-confirm-vote:hover {
  color: var(--mvx-button-bg-primary) !important;
}

/* Candidats sur page Vote - visibilité du nom */

/* TealLab - nom du candidat */
[data-mvx-theme='mvx:dark-theme'] .candidate-name {
  color: var(--mvx-text-color-primary);
}

[data-mvx-theme='mvx:dark-theme'] .candidate-card:hover .candidate-name {
  color: var(--mvx-text-accent-color);
}

[data-mvx-theme='mvx:dark-theme'] .candidate-selected .candidate-name {
  color: var(--mvx-text-accent-color);
}

/* VibeMode - nom du candidat */
[data-mvx-theme='mvx:vibe-theme'] .candidate-name {
  color: var(--mvx-white);
}

[data-mvx-theme='mvx:vibe-theme'] .candidate-card:hover .candidate-name {
  color: var(--mvx-fuchsia-550);
}

[data-mvx-theme='mvx:vibe-theme'] .candidate-selected .candidate-name {
  color: var(--mvx-fuchsia-550);
}

/* BrightLight - nom du candidat avec texte qui s'adapte au fond */
[data-mvx-theme='mvx:light-theme'] .candidate-name {
  color: #1f2937;
}

[data-mvx-theme='mvx:light-theme'] .candidate-card:hover .candidate-name {
  color: #ffffff;
}

[data-mvx-theme='mvx:light-theme'] .candidate-selected .candidate-name {
  color: #ffffff;
}

/* Animations pour les barres de progression des résultats */
@keyframes slideIn {
  from {
    width: 0%;
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}

/* Animation pour le modal de paramètres */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.2s ease-out;
}

/* Animation pour scale-in (succès/erreur) */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scaleIn {
  animation: scaleIn 0.3s ease-out;
}

/* ========================================
   ANIMATIONS UI/UX IMPROVEMENTS
   ======================================== */

/* Page fade-in (pour transitions entre pages) */
@keyframes pageFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.page-transition {
  animation: pageFadeIn 0.3s ease-in-out;
}

/* Slide up (pour modals, toasts) */
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slideUp {
  animation: slideUp 0.3s ease-out;
}

/* Scale bounce (pour boutons, cartes au hover) */
@keyframes scaleBounce {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

.animate-bounce-scale {
  animation: scaleBounce 0.4s ease-in-out;
}

/* Shake (pour erreurs) */
@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-5px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(5px);
  }
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

/* Loading shimmer (pour skeletons) */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.1) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite linear;
}

/* Hover lift effect */
.hover-lift {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.hover-lift:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
}

/* Button press effect */
.btn-press {
  transition: transform 0.1s ease;
}

.btn-press:active {
  transform: scale(0.97);
}

/* Fade-in stagger (pour listes) */
@keyframes fadeInStagger {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-stagger {
  animation: fadeInStagger 0.4s ease-out;
}

/* Smooth transitions globales */
* {
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Loading dots animation */
@keyframes loadingDots {
  0%, 20% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

.loading-dot {
  animation: loadingDots 1.4s infinite;
}

.loading-dot:nth-child(2) {
  animation-delay: 0.2s;
}

.loading-dot:nth-child(3) {
  animation-delay: 0.4s;
}

/* Fix form labels visibility on dark themes */
[data-mvx-theme='mvx:dark-theme'] label,
[data-mvx-theme='mvx:vibe-theme'] label {
  color: var(--mvx-text-color-primary) !important;
}

[data-mvx-theme='mvx:light-theme'] label {
  color: var(--mvx-text-color-primary) !important;
}

/* Fix file input button text color on BrightLight theme */
[data-mvx-theme='mvx:light-theme'] input[type="file"]::file-selector-button {
  color: #ffffff !important;
  background-color: var(--mvx-button-bg-primary) !important;
}

/* Ensure file button styling works across browsers */
[data-mvx-theme='mvx:light-theme'] input[type="file"]::-webkit-file-upload-button {
  color: #ffffff !important;
  background-color: var(--mvx-button-bg-primary) !important;
}

/* Vote page - Candidat sélectionné - liens en noir pour TealLab et VibeMode */
[data-mvx-theme='mvx:dark-theme'] .candidate-link-selected {
  color: #000000 !important;
  border-color: #000000 !important;
}

[data-mvx-theme='mvx:vibe-theme'] .candidate-link-selected {
  color: #000000 !important;
  border-color: #000000 !important;
}

/* BrightLight - liens en blanc (par défaut) */
[data-mvx-theme='mvx:light-theme'] .candidate-link-selected {
  color: #ffffff !important;
  border-color: #ffffff !important;
}

/* Vote page - Candidat sélectionné - biographie en noir pour TealLab et VibeMode */
[data-mvx-theme='mvx:dark-theme'] .candidate-bio-selected {
  color: #000000 !important;
}

[data-mvx-theme='mvx:vibe-theme'] .candidate-bio-selected {
  color: #000000 !important;
}

/* BrightLight - biographie en blanc */
[data-mvx-theme='mvx:light-theme'] .candidate-bio-selected {
  color: #ffffff !important;
}

/* Vote page - Texte d'avertissement */
/* TealLab et VibeMode - texte blanc */
[data-mvx-theme='mvx:dark-theme'] .vote-warning-text {
  color: #ffffff !important;
}

[data-mvx-theme='mvx:vibe-theme'] .vote-warning-text {
  color: #ffffff !important;
}

/* BrightLight - texte noir */
[data-mvx-theme='mvx:light-theme'] .vote-warning-text {
  color: #000000 !important;
}

/* Vote page - Boutons de vote désactivés (quand aucun candidat sélectionné) */
/* TealLab - texte noir */
[data-mvx-theme='mvx:dark-theme'] .vote-button-disabled {
  color: #000000 !important;
}

/* VibeMode - texte noir */
[data-mvx-theme='mvx:vibe-theme'] .vote-button-disabled {
  color: #000000 !important;
}

/* BrightLight - texte blanc */
[data-mvx-theme='mvx:light-theme'] .vote-button-disabled {
  color: #ffffff !important;
}

/* Private Vote Modal - Texte des modales de vote privé */
/* TealLab et VibeMode - texte blanc */
[data-mvx-theme='mvx:dark-theme'] .private-vote-modal-text {
  color: #ffffff !important;
}

[data-mvx-theme='mvx:vibe-theme'] .private-vote-modal-text {
  color: #ffffff !important;
}

/* BrightLight - texte noir */
[data-mvx-theme='mvx:light-theme'] .private-vote-modal-text {
  color: #000000 !important;
}

/* Private Vote Modal - Bouton */
/* TealLab et VibeMode - texte blanc */
[data-mvx-theme='mvx:dark-theme'] .private-vote-modal-button {
  color: #ffffff !important;
}

[data-mvx-theme='mvx:vibe-theme'] .private-vote-modal-button {
  color: #ffffff !important;
}

/* BrightLight - texte noir */
[data-mvx-theme='mvx:light-theme'] .private-vote-modal-button {
  color: #000000 !important;
}

/* Election Detail - Badges de statut */
/* TealLab et VibeMode - texte noir pour En cours, En attente */
[data-mvx-theme='mvx:dark-theme'] .election-status-badge {
  color: #000000 !important;
}

[data-mvx-theme='mvx:vibe-theme'] .election-status-badge {
  color: #000000 !important;
}

/* BrightLight - texte selon le badge */
[data-mvx-theme='mvx:light-theme'] .election-status-badge {
  /* Par défaut noir pour En cours, En attente */
  color: #000000 !important;
}

/* Exception pour le badge "Fermée" en BrightLight - texte blanc */
[data-mvx-theme='mvx:light-theme'] .bg-tertiary.election-status-badge {
  color: #ffffff !important;
}

/* Election Detail - Texte section temps restant/progression */
/* Texte noir pour tous les thèmes */
.election-time-text {
  color: #000000 !important;
}
